<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>登录</title>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.8.2/css/all.min.css">
    <!--    背景动画初始-->
    <link rel="stylesheet" href="css/normalize.min.css">
    <!--    -->
    <link rel="stylesheet" type="text/css" href="css/login-normalize.css">
    <link rel="stylesheet" type="text/css" href="css/demo.css">
    <link rel="stylesheet" type="text/css" href="css/component.css">

    <!--  login CSS  -->
    <link rel="stylesheet" href="css/login.css">
    <!--js work-->
    <script src="js/jquery-3.3.1.min.js"></script>
    <script src="bootstrap/js/bootstrap.min.js"></script>
    <script src="js/modernizr.custom.js"></script>
    <script src="js/login.js"></script>

</head>

<body>

<div class="wrapper" style="margin: 0">
    <div class="dowebok" id="dowebok">
        <div class="form-container sign-up-container">
            <form action="#">
                <h1>注册</h1>
                <div class="social-container">
                    <a href="#" class="social"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social"><i class="fab fa-google-plus-g"></i></a>
                    <a href="#" class="social"><i class="fab fa-linkedin-in"></i></a>
                </div>
                <span>或使用邮箱注册</span>
                <input type="text" class="registerUsername" required placeholder="姓名">
                <input type="email" required id="email" placeholder="电子邮箱" class="registerEmail">
                <div class="alert alert-danger alert-dismissible fade in hide" id="alert-box" role="alert">
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                    <p>无效的邮箱!</p>
                </div>
                <input type="password" required placeholder="密码" class="registerPassword">
                <!--                <button>注册</button>-->
                <!-- progress button -->
                <div class="progress-button elastic register" style="transform: scale(0.8,0.8)">
                    <button ><span style="font-size: 20px">注册</span></button>
                    <svg class="progress-circle" width="70" height="70">
                        <path d="m35,2.5c17.955803,0 32.5,14.544199 32.5,32.5c0,17.955803 -14.544197,32.5 -32.5,32.5c-17.955803,0 -32.5,-14.544197 -32.5,-32.5c0,-17.955801 14.544197,-32.5 32.5,-32.5z"/>
                    </svg>
                    <svg class="checkmark" width="70" height="70">
                        <path d="m31.5,46.5l15.3,-23.2"/>
                        <path d="m31.5,46.5l-8.5,-7.1"/>
                    </svg>
                    <svg class="cross" width="70" height="70">
                        <path d="m35,35l-9.3,-9.3"/>
                        <path d="m35,35l9.3,9.3"/>
                        <path d="m35,35l-9.3,9.3"/>
                        <path d="m35,35l9.3,-9.3"/>
                    </svg>
                </div><!-- /progress-button -->
            </form>
        </div>
        <div class="form-container sign-in-container">
            <form action="#">
                <h1>登录</h1>
                <div class="social-container">
                    <a href="#" class="social"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social"><i class="fab fa-google-plus-g"></i></a>
                    <a href="#" class="social"><i class="fab fa-linkedin-in"></i></a>
                </div>
                <span>或使用您的帐号</span>
                <input type="email" required placeholder="电子邮箱" class="loginEmail">
                <input type="password" required placeholder="密码" class="loginPassword">
                <a href="#">忘记密码？</a>
                <!-- progress button -->
                <div class="progress-button elastic" style="transform: scale(0.8,0.8)">
                    <button class="loginBtn"><span style="font-size: 20px">登录</span></button>
                    <svg class="progress-circle" width="70" height="70">
                        <path d="m35,2.5c17.955803,0 32.5,14.544199 32.5,32.5c0,17.955803 -14.544197,32.5 -32.5,32.5c-17.955803,0 -32.5,-14.544197 -32.5,-32.5c0,-17.955801 14.544197,-32.5 32.5,-32.5z"/>
                    </svg>
                    <svg class="checkmark" width="70" height="70">
                        <path d="m31.5,46.5l15.3,-23.2"/>
                        <path d="m31.5,46.5l-8.5,-7.1"/>
                    </svg>
                    <svg class="cross" width="70" height="70">
                        <path d="m35,35l-9.3,-9.3"/>
                        <path d="m35,35l9.3,9.3"/>
                        <path d="m35,35l-9.3,9.3"/>
                        <path d="m35,35l9.3,-9.3"/>
                    </svg>
                </div><!-- /progress-button -->
            </form>
        </div>
        <div class="overlay-container">
            <div class="overlay">
                <div class="overlay-panel overlay-left">
                    <h1>已有帐号？</h1>
                    <p>请使用您的帐号进行登录</p>
                    <button class="ghost" id="signIn">登录</button>

                </div>
                <div class="overlay-panel overlay-right">
                    <h1>没有帐号？</h1>
                    <p>立即注册加入我们，和我们一起开始旅程吧</p>
                    <button class="ghost" id="signUp">注册</button>
                </div>
            </div>
        </div>
    </div>
    <div class="palette">
        <div class="palette_item_wrapper">
            <div data-color="#e169c3" class="palette_color"></div>
            <div data-color="#b569e1" class="palette_color"></div>
            <div data-color="#7169e1" class="palette_color"></div>
            <div data-color="#69b8e1" class="palette_color"></div>
            <div data-color="#69e1d4" class="palette_color"></div>
            <div data-color="#6ce169" class="palette_color"></div>
            <div data-color="#bee169" class="palette_color"></div>
            <div data-color="#e1a169" class="palette_color"></div>
            <div data-color="#83091d" class="palette_color"></div>
            <div data-color="#83091d" class="palette_color"></div>
        </div>
        <div class="palette_color__main"></div>
    </div>
    <!--   footer  -->
    <iframe src="footer.html" width="100%" height="210px" frameborder="0" scrolling="no"
            style="margin:27px auto 0;"></iframe>

</div>


<script src="js/background-color.js"></script>
<script src="js/classie.js"></script>
<script src="js/uiProgressButton.js"></script>
<script src="layui/layui.all.js"></script>
<script>
    [].slice.call(document.querySelectorAll('.progress-button')).forEach(function (bttn, pos) {
        new UIProgressButton(bttn, {
            callback: function (instance) {
                var progress = 0,
                    interval = setInterval(function () {
                        progress = Math.min(progress + Math.random() * 0.1, 1);
                        instance.setProgress(progress);

                        if (progress === 1) {
                            instance.stop(pos === 1 || pos === 3 ? -1 : 1);
                            clearInterval(interval);
                        }
                    }, 150);
            }
        });
    });




    $('.register').click(function () {
        var username = $('.registerUsername').val();
        var email = $('.registerEmail').val();
        var password = $('.registerPassword').val();
        var register = {
            username: username,
            email: email,
            password: password,
        }
        // [{},{}]
        var user = localStorage.getItem("user");
        user = JSON.parse(user)
        if (user === null) {
            user = JSON.stringify(register);
            user = '[' + user + ']'
        } else {
            user.push(register)
            user = JSON.stringify(user)
        }
        localStorage.setItem("user", user);

        window.setTimeout(function () {
            layer.msg('注册成功',{
                icon:1,
                anim:4,
                time:1500
            })
            $('#signIn').click()

        }, 5000)
    })


    $('.loginBtn').click(function () {
        var flag = false;
        var email = $('.loginEmail').val();
        var password = $('.loginPassword').val();
        var user = localStorage.getItem('user');


        user = JSON.parse(user);
        if (user === null) {
            window.setTimeout(function () {
                layer.msg('请先注册后在登陆!', {
                    icon: 2,
                    anim: 6,
                    offset: '300px',
                    shade: [0.8, '#393D49'],
                    time:1500
                });
                $('.loginEmail').val('')
                $('.loginPassword').val('')
            },5000)
        } else {
            for (var i = 0; i < user.length; i++) {
                var userEmail = user[i].email;
                var userPassword = user[i].password;
                if (userEmail === email && userPassword === password) {
                    flag = true
                    break
                }
            }
            if (flag) {
                window.setTimeout(function () {
                    layer.msg('登陆成功',{
                        icon: 1,
                        anim: 5,
                        time: 1500
                    })
                    window.location.href = 'index.html'
                }, 5000)
            } else {
                window.setTimeout(function () {
                    layer.msg('账号密码错误！',{
                        icon: 2,
                        anim: 6,
                        time: 1500
                    })
                }, 5000)
            }
        }
    })
</script>
</body>
</html>